# Toolchains
## component, three main
- Binutils: A set of binary utilities including the assembler and the linker.
- GCC
- C library
- others
  - Linux kernel headers
    - need to generate a set of sanitized kernel headers
    - the kernel interfaces are always backward compatible
      - it is only necessary that the headers are from a kernel that is the same as, or older than, the one you are using on the target.
  - GDB

## toolchain variant
- CPU architectures
  - CPU architecture: ARM, MIPS, x86_64, and so on.
  - Big- or little-endian operation
  - Floating point support
  - EABI
    - FOR arm
      - OABI,Old Application Binary Interface, the previous ABI before 2000s
      - EABI, Extended Application Binary Interface in the late 2000s.
      - EABIHF, Application Binary Interface Hard-Float (EABIHF) 
		- depends on if floating-point unit available
- C library
  - POSIX standards
    - The programming interface to the Unix operating system is defined in the C language, which is now defined by the POSIX standards. The C library is the implementation of that interface;
- Toolchain name
```shell
$ gcc -dumpmachine
x86_64-linux-gnu

$ mipsel-unknown-linux-gnu-gcc -dumpmachine
mipsel-unknown-linux-gnu
```

## how to get a toolchain
- prebuilt
- generated by build tool
- build by yourself

## Shared libraries
### script to list shared library of a elf
```
#!/bin/sh
${CROSS_COMPILE}readelf -a $1 | grep "program interpreter"
${CROSS_COMPILE}readelf -a $1 | grep "Shared library"

$ MELP/list-libs helloworld
 [Requesting program interpreter: /lib/ld-linux-armhf.so.3]
 0x00000001 (NEEDED) Shared library: [libtest.so.6]
 0x00000001 (NEEDED) 
```

### build command to use shared lib
- add the -fPICparameter to gcc, and then link it using the -shared option
```
$ arm-cortex_a8-linux-gnueabihf-gcc -fPIC -c test1.c
$ arm-cortex_a8-linux-gnueabihf-gcc -fPIC -c test2.c
$ arm-cortex_a8-linux-gnueabihf-gcc -shared -o libtest.so test1.o test2.o
```

### shared library version numbers
-  The release version
   - Those that fix bugs or add new functions in a backward-compatible way
   - is simply a string that is appended to the library name
   - libjpeg.so.8.2.2 
-  interface number
   -  Those that break compatibility with existing applications
   -  soname
```
$ readelf -a /usr/lib/x86_64-linux-gnu/libjpeg.so.8.2.2 | grep SONAME
 0x000000000000000e (SONAME) Library soname: [libjpeg.so.8] 
```
 
  
## cross-compiling
-  Pure __makefiles__, where the toolchain is usually controlled by the make variable CROSS_COMPILE
- The GNU build system known as __Autotools__
- __CMake__ (https://cmake.org)

### autotools


### cmake


